# ğŸ’ NHL Live Commentary Web Client ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å®æ—¶NHLè§£è¯´æµåª’ä½“ç³»ç»Ÿï¼ŒåŒ…å«ä¸“ä¸šçš„Webå®¢æˆ·ç«¯ç•Œé¢ï¼Œå¯ä»¥æ¥æ”¶å’Œæ’­æ”¾AIç”Ÿæˆçš„NHLè§£è¯´éŸ³é¢‘ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šæ¼”ç¤ºæ¨¡å¼ï¼ˆæ¨èç”¨äºæµ‹è¯•ï¼‰

1. **å¯åŠ¨WebSocketæœåŠ¡å™¨**ï¼š
   ```bash
   python3 demo_websocket_with_real_audio.py
   ```

2. **æ‰“å¼€Webå®¢æˆ·ç«¯**ï¼š
   - åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `web_client.html`
   - æˆ–è€…ç›´æ¥åŒå‡» `web_client.html` æ–‡ä»¶

3. **è¿æ¥åˆ°æœåŠ¡å™¨**ï¼š
   - ç‚¹å‡» "ğŸ”— Connect" æŒ‰é’®
   - çŠ¶æ€æŒ‡ç¤ºç¯åº”è¯¥å˜ä¸ºç»¿è‰²
   - æŸ¥çœ‹æ—¥å¿—ç¡®è®¤è¿æ¥æˆåŠŸ

### æ–¹æ³•2ï¼šå®Œæ•´Pipelineæ¨¡å¼

1. **è¿è¡Œå®Œæ•´pipeline**ï¼š
   ```bash
   python3 live_commentary_pipeline.py GAME_ID DURATION_MINUTES
   ```

2. **æ‰“å¼€Webå®¢æˆ·ç«¯å¹¶è¿æ¥**ï¼ˆåŒæ–¹æ³•1æ­¥éª¤2-3ï¼‰

## ğŸ® Web Client ç•Œé¢è¯´æ˜

### ğŸ“Š è¿æ¥çŠ¶æ€é¢æ¿
- **çŠ¶æ€æŒ‡ç¤ºç¯**ï¼š
  - ğŸ”´ çº¢è‰² = æ–­å¼€è¿æ¥
  - ğŸŸ¡ é»„è‰² = æ­£åœ¨è¿æ¥
  - ğŸŸ¢ ç»¿è‰² = å·²è¿æ¥
- **è¿æ¥æ§åˆ¶**ï¼š
  - "ğŸ”— Connect" - è¿æ¥åˆ°WebSocketæœåŠ¡å™¨
  - "âŒ Disconnect" - æ–­å¼€è¿æ¥
  - "ğŸ—‘ï¸ Clear Logs" - æ¸…é™¤æ—¥å¿—è®°å½•

### ğŸ”Š éŸ³é¢‘æ§åˆ¶é¢æ¿
- **éŸ³é‡æ§åˆ¶**ï¼šæ»‘åŠ¨æ¡è°ƒèŠ‚éŸ³é‡ï¼ˆ0-100%ï¼‰
- **æ’­æ”¾æ§åˆ¶**ï¼š
  - "â–¶ï¸ Play" - å¼€å§‹æ’­æ”¾éŸ³é¢‘é˜Ÿåˆ—
  - "â¸ï¸ Pause" - æš‚åœå½“å‰æ’­æ”¾
  - "â¹ï¸ Stop" - åœæ­¢æ’­æ”¾å¹¶æ¸…ç©ºé˜Ÿåˆ—

### ğŸ’ æ¯”èµ›ä¿¡æ¯é¢æ¿
- **é˜Ÿä¼ä¿¡æ¯**ï¼šæ˜¾ç¤ºå¯¹æˆ˜åŒæ–¹ï¼ˆå¦‚ FLA @ EDMï¼‰
- **ç»Ÿè®¡æ•°æ®**ï¼š
  - **Segments** - æ¥æ”¶åˆ°çš„è§£è¯´æ®µæ•°
  - **Played** - å·²æ’­æ”¾çš„éŸ³é¢‘æ•°
  - **Connected** - è¿æ¥æŒç»­æ—¶é—´
- **å½“å‰è§£è¯´**ï¼šæ˜¾ç¤ºæ­£åœ¨æ’­æ”¾çš„è§£è¯´å‘˜å’Œå†…å®¹

### ğŸ“ æ—¥å¿—é¢æ¿
- **å®æ—¶æ—¥å¿—**ï¼šæ˜¾ç¤ºè¿æ¥çŠ¶æ€ã€éŸ³é¢‘æ¥æ”¶ã€é”™è¯¯ä¿¡æ¯
- **é¢œè‰²ç¼–ç **ï¼š
  - ğŸŸ¢ ç»¿è‰² = ä¿¡æ¯æ—¥å¿—
  - ğŸŸ¡ é»„è‰² = è­¦å‘Šæ—¥å¿—
  - ğŸ”´ çº¢è‰² = é”™è¯¯æ—¥å¿—

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. **è¿æ¥å¤±è´¥**
**ç°è±¡**ï¼šç‚¹å‡»ConnectæŒ‰é’®åçŠ¶æ€æ˜¾ç¤º"Connection Error"
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿WebSocketæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥æœåŠ¡å™¨åœ°å€æ˜¯å¦ä¸º `ws://localhost:8765`
- å°è¯•åˆ·æ–°é¡µé¢é‡æ–°è¿æ¥

#### 2. **éŸ³é¢‘è§£ç é”™è¯¯**
**ç°è±¡**ï¼šæ—¥å¿—æ˜¾ç¤º "Audio playback error: Unable to decode audio data"
**è§£å†³æ–¹æ¡ˆ**ï¼š
- è¿™é€šå¸¸æ˜¯å› ä¸ºæœåŠ¡å™¨å‘é€äº†ç©ºéŸ³é¢‘æ•°æ®
- ç­‰å¾…æœåŠ¡å™¨ç”ŸæˆçœŸå®éŸ³é¢‘æ•°æ®
- æ£€æŸ¥æœåŠ¡å™¨ç«¯TTSåŠŸèƒ½æ˜¯å¦æ­£å¸¸

#### 3. **æ— éŸ³é¢‘æ’­æ”¾**
**ç°è±¡**ï¼šæ”¶åˆ°éŸ³é¢‘æ®µä½†æ²¡æœ‰å£°éŸ³
**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥æµè§ˆå™¨éŸ³é¢‘æƒé™
- ç¡®ä¿éŸ³é‡ä¸ä¸º0
- ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®æ¿€æ´»Audio Context
- å°è¯•æ‰‹åŠ¨ç‚¹å‡»PlayæŒ‰é’®

#### 4. **TTSç”Ÿæˆå¤±è´¥**
**ç°è±¡**ï¼šæœåŠ¡å™¨æ—¥å¿—æ˜¾ç¤ºAPIå¯†é’¥é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ç¡®ä¿APIå¯†é’¥æ­£ç¡®è®¾ç½®
export GOOGLE_API_KEY="your-api-key-here"
# æˆ–åœ¨.envæ–‡ä»¶ä¸­è®¾ç½®
echo "GOOGLE_API_KEY=your-api-key-here" >> .env
```

## ğŸµ éŸ³é¢‘æ•°æ®æµç¨‹

```
WebSocketæœåŠ¡å™¨ â†’ ç”ŸæˆTTSéŸ³é¢‘ â†’ Base64ç¼–ç  â†’ å‘é€åˆ°Web Client â†’ è§£ç  â†’ æ’­æ”¾
```

### æ•°æ®æ ¼å¼

#### éŸ³é¢‘æ®µæ¶ˆæ¯æ ¼å¼ï¼š
```json
{
  "type": "audio_segment",
  "audio_id": "unique_id",
  "speaker": "Alex Chen",
  "text": "è§£è¯´å†…å®¹æ–‡æœ¬",
  "voice_style": "enthusiastic",
  "timestamp": "2025-06-19T12:30:00.000Z",
  "segment_index": 0,
  "duration_estimate": 3.0,
  "pause_after": 0.5,
  "audio_data": "base64_encoded_wav_data",
  "has_audio": true
}
```

#### è§£è¯´æ–‡æœ¬æ¶ˆæ¯æ ¼å¼ï¼š
```json
{
  "type": "commentary_text",
  "speaker": "Mike Rodriguez",
  "text": "è§£è¯´å†…å®¹æ–‡æœ¬",
  "emotion": "analytical",
  "timestamp": "2025-06-19T12:30:00.000Z",
  "segment_index": 1
}
```

## ğŸ› ï¸ å¼€å‘è€…ä¿¡æ¯

### Web Client æŠ€æœ¯æ ˆ
- **HTML5 + CSS3**ï¼šç°ä»£åŒ–å“åº”å¼ç•Œé¢
- **JavaScript ES6+**ï¼šå®¢æˆ·ç«¯é€»è¾‘
- **WebSocket API**ï¼šå®æ—¶é€šä¿¡
- **Web Audio API**ï¼šéŸ³é¢‘æ’­æ”¾å’Œå¤„ç†

### æ–‡ä»¶ç»“æ„
```
adk_hackathon/
â”œâ”€â”€ web_client.html                    # ğŸŒ ä¸»Webå®¢æˆ·ç«¯
â”œâ”€â”€ demo_websocket_with_real_audio.py  # ğŸ¬ å¸¦çœŸå®éŸ³é¢‘çš„æ¼”ç¤º
â”œâ”€â”€ demo_websocket_with_mock_audio.py  # ğŸ­ æ¨¡æ‹ŸéŸ³é¢‘æ¼”ç¤º
â”œâ”€â”€ test_websocket_server.py           # ğŸ§ª WebSocketæµ‹è¯•å·¥å…·
â””â”€â”€ live_commentary_pipeline.py       # ğŸ’ å®Œæ•´Pipelineï¼ˆå·²é›†æˆWebSocketï¼‰
```

### è‡ªå®šä¹‰é…ç½®

#### WebSocketç«¯å£é…ç½®
```bash
# ä¿®æ”¹é»˜è®¤ç«¯å£ï¼ˆåœ¨pipeline_config.pyä¸­ï¼‰
export WEBSOCKET_PORT=8080
export WEBSOCKET_HOST=0.0.0.0  # å…è®¸å¤–éƒ¨è¿æ¥
```

#### éŸ³é¢‘è®¾ç½®
```bash
# éŸ³é¢‘ç¼“å†²åŒºå¤§å°
export AUDIO_BUFFER_SIZE=200

# éŸ³é¢‘å»¶è¿Ÿè®¾ç½®
export AUDIO_BUFFER_DELAY=10
```

## ğŸ¯ ä½¿ç”¨æŠ€å·§

1. **æœ€ä½³ä½“éªŒ**ï¼šä½¿ç”¨Chromeæˆ–Firefoxæµè§ˆå™¨
2. **ç½‘ç»œ**ï¼šç¡®ä¿åœ¨æœ¬åœ°ç½‘ç»œç¯å¢ƒä¸­è¿è¡Œ
3. **éŸ³é¢‘**ï¼šé¦–æ¬¡ä½¿ç”¨æ—¶å…è®¸æµè§ˆå™¨éŸ³é¢‘æƒé™
4. **å¤šå®¢æˆ·ç«¯**ï¼šå¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªWebå®¢æˆ·ç«¯è¿æ¥åˆ°åŒä¸€æœåŠ¡å™¨
5. **æ—¥å¿—ç›‘æ§**ï¼šä¿æŒæ—¥å¿—é¢æ¿æ‰“å¼€ä»¥ç›‘æ§è¿æ¥çŠ¶æ€

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡å™¨ç«¯æ—¥å¿—è¾“å‡º
2. æµè§ˆå™¨å¼€å‘è€…æ§åˆ¶å°
3. Web Clientæ—¥å¿—é¢æ¿
4. ç½‘ç»œè¿æ¥çŠ¶æ€

---

ğŸ‰ **äº«å—AIé©±åŠ¨çš„NHLå®æ—¶è§£è¯´ä½“éªŒï¼** ğŸ’